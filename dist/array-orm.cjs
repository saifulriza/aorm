"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});class a{_data;_subs;constructor(t=[]){this._data=t,this._subs=new Set}subscribe(t){return this._subs.add(t),t(this._data),()=>this._subs.delete(t)}_emit(){for(const t of this._subs)t(this._data)}get(){return this._data}set(t){this._data=t,this._emit()}update(t){this._data=t(this._data),this._emit()}push(t){this._data.push(t),this._emit()}remove(t){this._data=this._data.filter(e=>!t(e)),this._emit()}where(t,e){const s=typeof e=="function"?r=>e(r[t]):r=>r[t]===e;return new a(this._data.filter(s))}select(...t){return new a(this._data.map(e=>{const s={};for(const r of t)s[r]=e[r];return s}))}orderBy(t,e="asc"){return new a([...this._data].sort((s,r)=>s[t]<r[t]?e==="asc"?-1:1:s[t]>r[t]?e==="asc"?1:-1:0))}distinct(t){const e=new Set,s=this._data.filter(r=>{const n=r[t];return e.has(n)?!1:(e.add(n),!0)});return new a(s)}hasMany(t,e,s,r="items"){const n=new Map;for(const i of t){const u=i[s];n.has(u)||n.set(u,[]),n.get(u).push(i)}const h=this._data.map(i=>({...i,[r]:n.get(i[e])||[]}));return new a(h)}eager(t){let e=this;for(const s of t)e=e.hasMany(...s);return e}}typeof window<"u"&&(window.AORM=a);exports.AORM=a;exports.default=a;
//# sourceMappingURL=array-orm.cjs.map
