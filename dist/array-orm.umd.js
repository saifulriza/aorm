(function(a,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(a=typeof globalThis<"u"?globalThis:a||self,s(a.AORM={}))})(this,function(a){"use strict";class s{_data;_subs;constructor(t=[]){this._data=t,this._subs=new Set}subscribe(t){return this._subs.add(t),t(this._data),()=>this._subs.delete(t)}_emit(){for(const t of this._subs)t(this._data)}get(){return this._data}set(t){this._data=t,this._emit()}update(t){this._data=t(this._data),this._emit()}push(t){this._data.push(t),this._emit()}remove(t){this._data=this._data.filter(e=>!t(e)),this._emit()}where(t,e){const n=typeof e=="function"?r=>e(r[t]):r=>r[t]===e;return new s(this._data.filter(n))}select(...t){return new s(this._data.map(e=>{const n={};for(const r of t)n[r]=e[r];return n}))}orderBy(t,e="asc"){return new s([...this._data].sort((n,r)=>n[t]<r[t]?e==="asc"?-1:1:n[t]>r[t]?e==="asc"?1:-1:0))}distinct(t){const e=new Set,n=this._data.filter(r=>{const i=r[t];return e.has(i)?!1:(e.add(i),!0)});return new s(n)}hasMany(t,e,n,r="items"){const i=new Map;for(const u of t){const o=u[n];i.has(o)||i.set(o,[]),i.get(o).push(u)}const d=this._data.map(u=>({...u,[r]:i.get(u[e])||[]}));return new s(d)}eager(t){let e=this;for(const n of t)e=e.hasMany(...n);return e}}typeof window<"u"&&(window.AORM=s),a.AORM=s,a.default=s,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=array-orm.umd.js.map
